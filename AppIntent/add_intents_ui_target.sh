#!/bin/bash

echo "=================================================="
echo "Intents UI Extension è‡ªåŠ¨é…ç½®è„šæœ¬"
echo "=================================================="
echo ""

PROJECT_DIR="/Users/linjx/Desktop/kapi/AppIntent"
XCODE_PROJECT="$PROJECT_DIR/AppIntent.xcodeproj"

echo "âœ… å‡†å¤‡å·¥ä½œå·²å®Œæˆï¼š"
echo "   - IntentViewController.swift"
echo "   - Info.plist"
echo "   - MainInterface.storyboard"
echo "   - ShowExpenseIntentUI.entitlements"
echo ""
echo "ğŸ“‹ è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤åœ¨ Xcode ä¸­æ‰‹åŠ¨æ·»åŠ  Targetï¼š"
echo ""
echo "1ï¸âƒ£  æ‰“å¼€ Xcode é¡¹ç›®ï¼š"
echo "   open '$XCODE_PROJECT'"
echo ""
echo "2ï¸âƒ£  æ·»åŠ æ–° Targetï¼š"
echo "   - File â†’ New â†’ Target..."
echo "   - é€‰æ‹© iOS â†’ Intents UI Extension"
echo "   - Product Name: ShowExpenseIntentUI"
echo "   - Language: Swift"
echo "   - å–æ¶ˆå‹¾é€‰ 'Include Configuration Intent'"
echo "   - ç‚¹å‡» Finish"
echo ""
echo "3ï¸âƒ£  åˆ é™¤è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ï¼š"
echo "   Xcode ä¼šåœ¨ ShowExpenseIntentUI æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€äº›æ–‡ä»¶"
echo "   åˆ é™¤è¿™äº›è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ï¼ˆæˆ‘ä»¬ä½¿ç”¨å·²å‡†å¤‡å¥½çš„ï¼‰"
echo ""
echo "4ï¸âƒ£  ç§»åŠ¨å‡†å¤‡å¥½çš„æ–‡ä»¶ï¼š"
echo "   å°†ä»¥ä¸‹æ–‡ä»¶ç§»åŠ¨åˆ° Xcode åˆ›å»ºçš„ ShowExpenseIntentUI æ–‡ä»¶å¤¹ä¸­ï¼š"
echo "   - IntentViewController.swift"
echo "   - Info.plist"
echo "   - MainInterface.storyboard"
echo "   - ShowExpenseIntentUI.entitlements"
echo ""
echo "5ï¸âƒ£  é…ç½® Targetï¼š"
echo "   a. é€‰æ‹© ShowExpenseIntentUI target"
echo "   b. Signing & Capabilities:"
echo "      - æ·»åŠ  App Groups capability"
echo "      - å‹¾é€‰ group.com.dm.AppIntent"
echo "   c. Build Settings:"
echo "      - Code Signing Entitlements: ShowExpenseIntentUI/ShowExpenseIntentUI.entitlements"
echo "   d. Build Phases â†’ Link Binary With Libraries:"
echo "      - æ·»åŠ  IntentsUI.framework"
echo ""
echo "6ï¸âƒ£  éªŒè¯é…ç½®ï¼š"
echo "   a. ç¡®ä¿ Info.plist ä¸­åŒ…å«ï¼š"
echo "      <key>IntentsSupported</key>"
echo "      <array>"
echo "          <string>ShowExpenseIntent</string>"
echo "      </array>"
echo ""
echo "   b. ç¡®ä¿ MainInterface.storyboard çš„ Initial View Controller"
echo "      æŒ‡å‘ IntentViewController"
echo ""
echo "7ï¸âƒ£  æ„å»ºé¡¹ç›®ï¼š"
echo "   Product â†’ Build (âŒ˜B)"
echo ""
echo "=================================================="
echo "ç°åœ¨æ‰“å¼€ Xcode å—? (y/n)"
read -r response

if [[ "$response" =~ ^([yY][eE][sS]|[yY])$ ]]; then
    echo "æ­£åœ¨æ‰“å¼€ Xcode..."
    open "$XCODE_PROJECT"
    echo "âœ… Xcode å·²æ‰“å¼€ï¼Œè¯·æŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ“ä½œ"
else
    echo "æ‰‹åŠ¨æ‰“å¼€é¡¹ç›®ï¼š"
    echo "open '$XCODE_PROJECT'"
fi

echo ""
echo "é…ç½®å®Œæˆåï¼ŒæŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ï¼š"
echo "cat '$PROJECT_DIR/INTENTS_UI_SETUP.md'"
